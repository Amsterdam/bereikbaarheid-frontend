suite: Secrets
release:
  name: test
templates:
  - secret.yaml
tests:
  - it: should have release name as postfix
    set:
      secrets:
        my-secrets:
          type: opaque
    asserts:
      - isKind:
          of: Secret
      - matchRegex:
          path: metadata.name
          pattern: -test$

  - it: should support opaque secrets
    set:
      secrets:
        my-secrets:
          type: opaque
          secrets:
            secret1: value1
            secret2: value2
    asserts:
      - hasDocuments:
          count: 1
      - equal:
          path: stringData
          value:
            secret1: value1
            secret2: value2
